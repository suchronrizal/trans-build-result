(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"OS+F":function(e,t,n){"use strict";n.r(t);var a=n("cDcd"),o=n.n(a),r=n("h74D"),i=n("oncg"),s=n("17x9"),c=n.n(s),l=n("Vl3Y"),u=n("5rEg"),m=n("2/Rp"),p=n("faye"),d=n("MFj2"),f=n("CtXQ"),h=n("TSYQ"),g=n.n(h),y=n("wEI+"),b=n("RqAY");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(){}var k=function(e){function t(){var e,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=I(t).apply(this,arguments),(e=!o||"object"!==v(o)&&"function"!=typeof o?N(n):o).state={closing:!0,closed:!1},e.handleClose=function(t){t.preventDefault();var n=p.findDOMNode(N(e));n.style.height="".concat(n.offsetHeight,"px"),n.style.height="".concat(n.offsetHeight,"px"),e.setState({closing:!1}),(e.props.onClose||j)(t)},e.animationEnd=function(){e.setState({closed:!0,closing:!0}),(e.props.afterClose||j)()},e.renderAlert=function(t){var n,o,r=t.getPrefixCls,i=e.props,s=i.description,c=i.prefixCls,l=i.message,u=i.closeText,m=i.banner,p=i.className,h=void 0===p?"":p,y=i.style,v=i.icon,O=e.props,I=O.closable,N=O.type,T=O.showIcon,j=O.iconType,k=r("alert",c);T=!(!m||void 0!==T)||T,N=m&&void 0===N?"warning":N||"info";var _="filled";if(!j){switch(N){case"success":j="check-circle";break;case"info":j="info-circle";break;case"error":j="close-circle";break;case"warning":j="exclamation-circle";break;default:j="default"}s&&(_="outlined")}u&&(I=!0);var x=g()(k,"".concat(k,"-").concat(N),(E(n={},"".concat(k,"-close"),!e.state.closing),E(n,"".concat(k,"-with-description"),!!s),E(n,"".concat(k,"-no-icon"),!T),E(n,"".concat(k,"-banner"),!!m),E(n,"".concat(k,"-closable"),I),n),h),S=I?a.createElement("a",{onClick:e.handleClose,className:"".concat(k,"-close-icon")},u||a.createElement(f.a,{type:"close"})):null,C=Object(b.a)(e.props),P=v&&(a.isValidElement(v)?a.cloneElement(v,{className:g()((o={},E(o,v.props.className,v.props.className),E(o,"".concat(k,"-icon"),!0),o))}):a.createElement("span",{className:"".concat(k,"-icon")},v))||a.createElement(f.a,{className:"".concat(k,"-icon"),type:j,theme:_});return e.state.closed?null:a.createElement(d.a,{component:"",showProp:"data-show",transitionName:"".concat(k,"-slide-up"),onEnd:e.animationEnd},a.createElement("div",w({"data-show":e.state.closing,className:x,style:y},C),T?P:null,a.createElement("span",{className:"".concat(k,"-message")},l),a.createElement("span",{className:"".concat(k,"-description")},s),S))},e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,a["Component"]),n=t,(o=[{key:"render",value:function(){return a.createElement(y.a,null,this.renderAlert)}}])&&O(n.prototype,o),r&&O(n,r),t}(),_=n("URgk"),x=n("WTFU");const S="./public/assets/images/background-login.jpg";class C extends a.Component{constructor(e){super(e),this.componentDidMount=(()=>{const{isSingedIn:e}=this.props.auth;e&&(this.props.history.push("/home/dashboard"),Object(_.setTimeout)(()=>{window.location.reload()},200))}),this.componentDidUpdate=(e=>{const{isSingedIn:t}=this.props.auth;t!==e.auth.isSingedIn&&(this.props.history.push("/home/dashboard"),Object(_.setTimeout)(()=>{window.location.reload()},200))}),this.handleLogin=(e=>{e.preventDefault(),this.props.form.validateFields((e,t)=>{e||this.props.loginAction(t)})}),this.state={}}render(){const{auth:e}=this.props,{getFieldDecorator:t}=this.props.form;return o.a.createElement("div",{className:"container-scroller"},o.a.createElement("div",{className:"page-body-wrapper full-page-wrapper auth-page"},o.a.createElement("div",{className:"content-wrapper d-flex align-items-center auth theme-one",style:{backgroundImage:`url(${S})`,backgroundSize:"cover",padding:"0px",margin:"0px"}},o.a.createElement("div",{className:"row w-100"},o.a.createElement("div",{className:"col-lg-2"}),o.a.createElement("div",{className:"col-lg-4"},o.a.createElement("div",{className:""},o.a.createElement("div",{className:"login100-form mt-5 "},o.a.createElement("div",{className:"mb-5"},o.a.createElement("img",{src:"./public/assets/images/logo.png",alt:"login-logo",style:{width:"350px"}})),o.a.createElement("h3",{className:"text-dark mt-3"},"LOGIN"),o.a.createElement("div",{className:"card py-0 rounded"},o.a.createElement("div",{className:"card-body"},o.a.createElement(l.a,{className:"input-round",onSubmit:this.handleLogin},o.a.createElement(l.a.Item,{label:"EMAIL"},t("email",{rules:[{required:!0,message:"Please input your email!"}]})(o.a.createElement(u.a,{className:"form-control txt-login",size:"large",placeholder:"Email"}))),o.a.createElement(l.a.Item,{label:"PASSWORD"},t("password",{rules:[{required:!0,message:"Please input your password!"}]})(o.a.createElement(u.a,{className:"form-control txt-login",size:"large",type:"password",placeholder:"Password"}))),o.a.createElement(m.a,{type:"primary",htmlType:"submit",shape:"round",size:"large",loading:e.isLoading,className:"w-100 btn-login"},"LOGIN")),e.message&&o.a.createElement(k,{className:"mt-3 p-2 error-login",description:e.message,type:"error",closable:!0}))))))))))}}C.propTypes={form:c.a.objectOf(c.a.any).isRequired,auth:c.a.objectOf(c.a.any).isRequired,loginAction:c.a.func.isRequired,history:c.a.objectOf(c.a.any).isRequired};const P=l.a.create({name:"normal_login"})(C);t.default=Object(r.connect)(({auth:e})=>({auth:e}),{loginAction:x.a})(Object(i.withRouter)(P))},URgk:function(e,t,n){(function(e){var a=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(o.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("YBdB"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("yLpj"))},YBdB:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var a,o,r,i,s,c=1,l={},u=!1,m=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?a=function(e){t.nextTick(function(){f(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){f(e.data)},a=function(e){r.port2.postMessage(e)}):m&&"onreadystatechange"in m.createElement("script")?(o=m.documentElement,a=function(e){var t=m.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):a=function(e){setTimeout(f,0,e)}:(i="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&f(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),a=function(t){e.postMessage(i+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return l[c]=o,a(c),c++},p.clearImmediate=d}function d(e){delete l[e]}function f(e){if(u)setTimeout(f,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}(t)}finally{d(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("yLpj"),n("8oxB"))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYW50ZC9lcy9hbGVydC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvYXV0aC9Mb2dpbi5qc3giLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiXSwibmFtZXMiOlsiX3R5cGVvZiIsIm9iaiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJfZXh0ZW5kcyIsIk9iamVjdCIsImFzc2lnbiIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsInRoaXMiLCJfZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX2RlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJfZ2V0UHJvdG90eXBlT2YiLCJvIiwic2V0UHJvdG90eXBlT2YiLCJnZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfc2V0UHJvdG90eXBlT2YiLCJwIiwibm9vcCIsImFsZXJ0X0FsZXJ0IiwiX1JlYWN0JENvbXBvbmVudCIsIkFsZXJ0IiwiX3RoaXMiLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NsYXNzQ2FsbENoZWNrIiwic3RhdGUiLCJjbG9zaW5nIiwiY2xvc2VkIiwiaGFuZGxlQ2xvc2UiLCJlIiwicHJldmVudERlZmF1bHQiLCJkb20iLCJleHRlcm5hbF9SZWFjdERPTV8iLCJzdHlsZSIsImhlaWdodCIsImNvbmNhdCIsIm9mZnNldEhlaWdodCIsInNldFN0YXRlIiwib25DbG9zZSIsImFuaW1hdGlvbkVuZCIsImFmdGVyQ2xvc2UiLCJyZW5kZXJBbGVydCIsIl9yZWYiLCJfY2xhc3NOYW1lcyIsIl9jbGFzc05hbWVzMiIsImdldFByZWZpeENscyIsIl90aGlzJHByb3BzIiwiZGVzY3JpcHRpb24iLCJjdXN0b21pemVQcmVmaXhDbHMiLCJwcmVmaXhDbHMiLCJtZXNzYWdlIiwiY2xvc2VUZXh0IiwiYmFubmVyIiwiX3RoaXMkcHJvcHMkY2xhc3NOYW1lIiwiY2xhc3NOYW1lIiwiaWNvbiIsIl90aGlzJHByb3BzMiIsImNsb3NhYmxlIiwidHlwZSIsInNob3dJY29uIiwiaWNvblR5cGUiLCJ1bmRlZmluZWQiLCJpY29uVGhlbWUiLCJhbGVydENscyIsImNsYXNzbmFtZXNfZGVmYXVsdCIsImNsb3NlSWNvbiIsImV4dGVybmFsX1JlYWN0XyIsIm9uQ2xpY2siLCJlc19pY29uIiwiZGF0YU9yQXJpYVByb3BzIiwiZ2V0RGF0YU9yQXJpYVByb3BzIiwiaWNvbk5vZGUiLCJ0aGVtZSIsIkFuaW1hdGUiLCJjb21wb25lbnQiLCJzaG93UHJvcCIsInRyYW5zaXRpb25OYW1lIiwib25FbmQiLCJkYXRhLXNob3ciLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJfaW5oZXJpdHMiLCJjb25maWdfcHJvdmlkZXIiLCJiZ0xvZ2luIiwiTG9naW4iLCJDb21wb25lbnQiLCJzdXBlciIsImNvbXBvbmVudERpZE1vdW50IiwiaXNTaW5nZWRJbiIsImF1dGgiLCJoaXN0b3J5IiwicHVzaCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImNvbXBvbmVudERpZFVwZGF0ZSIsIm5leHRQcm9wcyIsImhhbmRsZUxvZ2luIiwiZm9ybSIsInZhbGlkYXRlRmllbGRzIiwiZXJyIiwidmFsdWVzIiwibG9naW5BY3Rpb24iLCJyZW5kZXIiLCJnZXRGaWVsZERlY29yYXRvciIsImV4dGVybmFsX1JlYWN0X2RlZmF1bHQiLCJhIiwiY3JlYXRlRWxlbWVudCIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRTaXplIiwicGFkZGluZyIsIm1hcmdpbiIsInNyYyIsImFsdCIsIndpZHRoIiwiZXNfZm9ybSIsIm9uU3VibWl0IiwiSXRlbSIsImxhYmVsIiwicnVsZXMiLCJyZXF1aXJlZCIsImlucHV0Iiwic2l6ZSIsInBsYWNlaG9sZGVyIiwiZXNfYnV0dG9uIiwiaHRtbFR5cGUiLCJzaGFwZSIsImxvYWRpbmciLCJpc0xvYWRpbmciLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJvYmplY3RPZiIsImFueSIsImlzUmVxdWlyZWQiLCJmdW5jIiwiTG9naW5Gb3JtIiwiRm9ybSIsIm5hbWUiLCJjb25uZWN0Iiwid2l0aFJvdXRlciIsImdsb2JhbCIsInNjb3BlIiwiRnVuY3Rpb24iLCJUaW1lb3V0IiwiaWQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJleHBvcnRzIiwiY2xlYXJUaW1lb3V0Iiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwidGltZW91dCIsImNsb3NlIiwidW5yZWYiLCJyZWYiLCJlbnJvbGwiLCJpdGVtIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXRJbW1lZGlhdGUiLCJjbGVhckltbWVkaWF0ZSIsInByb2Nlc3MiLCJyZWdpc3RlckltbWVkaWF0ZSIsImh0bWwiLCJjaGFubmVsIiwibWVzc2FnZVByZWZpeCIsIm9uR2xvYmFsTWVzc2FnZSIsIm5leHRIYW5kbGUiLCJ0YXNrc0J5SGFuZGxlIiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiZG9jIiwiZG9jdW1lbnQiLCJhdHRhY2hUbyIsInRvU3RyaW5nIiwiaGFuZGxlIiwibmV4dFRpY2siLCJydW5JZlByZXNlbnQiLCJwb3N0TWVzc2FnZSIsImltcG9ydFNjcmlwdHMiLCJwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzIiwib2xkT25NZXNzYWdlIiwib25tZXNzYWdlIiwiY2FuVXNlUG9zdE1lc3NhZ2UiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwiZXZlbnQiLCJkYXRhIiwicG9ydDIiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JpcHQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZW1vdmVDaGlsZCIsImFwcGVuZENoaWxkIiwiTWF0aCIsInJhbmRvbSIsImluZGV4T2YiLCJzbGljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsImNhbGxiYWNrIiwiYXJncyIsIkFycmF5IiwidGFzayIsInJ1biJdLCJtYXBwaW5ncyI6IitSQUFBLFNBQUFBLEVBQUFDLEdBQXdVLE9BQXRPRCxFQUEzRSxtQkFBQUUsUUFBQSxpQkFBQUEsT0FBQUMsU0FBMkUsU0FBQUYsR0FBa0MsY0FBQUEsR0FBK0IsU0FBQUEsR0FBa0MsT0FBQUEsR0FBQSxtQkFBQUMsUUFBQUQsRUFBQUcsY0FBQUYsUUFBQUQsSUFBQUMsT0FBQUcsVUFBQSxnQkFBQUosSUFBbUlBLEdBRXhVLFNBQUFLLElBQW1SLE9BQTlQQSxFQUFBQyxPQUFBQyxRQUFBLFNBQUFDLEdBQWdELFFBQUFDLEVBQUEsRUFBZ0JBLEVBQUFDLFVBQUFDLE9BQXNCRixJQUFBLENBQU8sSUFBQUcsRUFBQUYsVUFBQUQsR0FBMkIsUUFBQUksS0FBQUQsRUFBMEJOLE9BQUFGLFVBQUFVLGVBQUFDLEtBQUFILEVBQUFDLEtBQXlETCxFQUFBSyxHQUFBRCxFQUFBQyxJQUFpQyxPQUFBTCxJQUFrQlEsTUFBQUMsS0FBQVAsV0FFblIsU0FBQVEsRUFBQWxCLEVBQUFhLEVBQUFNLEdBQW1NLE9BQXhKTixLQUFBYixFQUFrQk0sT0FBQWMsZUFBQXBCLEVBQUFhLEVBQUEsQ0FBa0NNLFFBQUFFLFlBQUEsRUFBQUMsY0FBQSxFQUFBQyxVQUFBLElBQWdGdkIsRUFBQWEsR0FBQU0sRUFB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Q2lCLFFBQ2pCMUMsRUFBQWMsR0FDQUwsR0FBQSxNQXZFQSxDQXlMQyxvQkFBQXhLLFVBQUEsSUFBQW9JLEVBQUFwSixLQUFBb0osRUFBQXBJIiwiZmlsZSI6IjMuaW5kZXguN2FjN2I4OTBiNzg4M2MxM2VjMDguanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBBbmltYXRlIGZyb20gJ3JjLWFuaW1hdGUnO1xuaW1wb3J0IEljb24gZnJvbSAnLi4vaWNvbic7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IENvbmZpZ0NvbnN1bWVyIH0gZnJvbSAnLi4vY29uZmlnLXByb3ZpZGVyJztcbmltcG9ydCBnZXREYXRhT3JBcmlhUHJvcHMgZnJvbSAnLi4vX3V0aWwvZ2V0RGF0YU9yQXJpYVByb3BzJztcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBBbGVydCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoQWxlcnQsIF9SZWFjdCRDb21wb25lbnQpO1xuXG4gIGZ1bmN0aW9uIEFsZXJ0KCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBbGVydCk7XG5cbiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihBbGVydCkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgX3RoaXMuc3RhdGUgPSB7XG4gICAgICBjbG9zaW5nOiB0cnVlLFxuICAgICAgY2xvc2VkOiBmYWxzZVxuICAgIH07XG5cbiAgICBfdGhpcy5oYW5kbGVDbG9zZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgZG9tID0gUmVhY3RET00uZmluZERPTU5vZGUoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpO1xuICAgICAgZG9tLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KGRvbS5vZmZzZXRIZWlnaHQsIFwicHhcIik7IC8vIE1hZ2ljIGNvZGVcbiAgICAgIC8vIOmHjeWkjeS4gOasoeWQjuaJjeiDveato+ehruiuvue9riBoZWlnaHRcblxuICAgICAgZG9tLnN0eWxlLmhlaWdodCA9IFwiXCIuY29uY2F0KGRvbS5vZmZzZXRIZWlnaHQsIFwicHhcIik7XG5cbiAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY2xvc2luZzogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICAoX3RoaXMucHJvcHMub25DbG9zZSB8fCBub29wKShlKTtcbiAgICB9O1xuXG4gICAgX3RoaXMuYW5pbWF0aW9uRW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjbG9zZWQ6IHRydWUsXG4gICAgICAgIGNsb3Npbmc6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICAoX3RoaXMucHJvcHMuYWZ0ZXJDbG9zZSB8fCBub29wKSgpO1xuICAgIH07XG5cbiAgICBfdGhpcy5yZW5kZXJBbGVydCA9IGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgICB2YXIgX2NsYXNzTmFtZXMsIF9jbGFzc05hbWVzMjtcblxuICAgICAgdmFyIGdldFByZWZpeENscyA9IF9yZWYuZ2V0UHJlZml4Q2xzO1xuICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgZGVzY3JpcHRpb24gPSBfdGhpcyRwcm9wcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICBjdXN0b21pemVQcmVmaXhDbHMgPSBfdGhpcyRwcm9wcy5wcmVmaXhDbHMsXG4gICAgICAgICAgbWVzc2FnZSA9IF90aGlzJHByb3BzLm1lc3NhZ2UsXG4gICAgICAgICAgY2xvc2VUZXh0ID0gX3RoaXMkcHJvcHMuY2xvc2VUZXh0LFxuICAgICAgICAgIGJhbm5lciA9IF90aGlzJHByb3BzLmJhbm5lcixcbiAgICAgICAgICBfdGhpcyRwcm9wcyRjbGFzc05hbWUgPSBfdGhpcyRwcm9wcy5jbGFzc05hbWUsXG4gICAgICAgICAgY2xhc3NOYW1lID0gX3RoaXMkcHJvcHMkY2xhc3NOYW1lID09PSB2b2lkIDAgPyAnJyA6IF90aGlzJHByb3BzJGNsYXNzTmFtZSxcbiAgICAgICAgICBzdHlsZSA9IF90aGlzJHByb3BzLnN0eWxlLFxuICAgICAgICAgIGljb24gPSBfdGhpcyRwcm9wcy5pY29uO1xuICAgICAgdmFyIF90aGlzJHByb3BzMiA9IF90aGlzLnByb3BzLFxuICAgICAgICAgIGNsb3NhYmxlID0gX3RoaXMkcHJvcHMyLmNsb3NhYmxlLFxuICAgICAgICAgIHR5cGUgPSBfdGhpcyRwcm9wczIudHlwZSxcbiAgICAgICAgICBzaG93SWNvbiA9IF90aGlzJHByb3BzMi5zaG93SWNvbixcbiAgICAgICAgICBpY29uVHlwZSA9IF90aGlzJHByb3BzMi5pY29uVHlwZTtcbiAgICAgIHZhciBwcmVmaXhDbHMgPSBnZXRQcmVmaXhDbHMoJ2FsZXJ0JywgY3VzdG9taXplUHJlZml4Q2xzKTsgLy8gYmFubmVy5qih5byP6buY6K6k5pyJIEljb25cblxuICAgICAgc2hvd0ljb24gPSBiYW5uZXIgJiYgc2hvd0ljb24gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBzaG93SWNvbjsgLy8gYmFubmVy5qih5byP6buY6K6k5Li66K2m5ZGKXG5cbiAgICAgIHR5cGUgPSBiYW5uZXIgJiYgdHlwZSA9PT0gdW5kZWZpbmVkID8gJ3dhcm5pbmcnIDogdHlwZSB8fCAnaW5mbyc7XG4gICAgICB2YXIgaWNvblRoZW1lID0gJ2ZpbGxlZCc7IC8vIHNob3VsZCB3ZSBnaXZlIGEgd2FybmluZz9cbiAgICAgIC8vIHdhcm5pbmcoIWljb25UeXBlLCBgVGhlIHByb3BlcnR5ICdpY29uVHlwZScgaXMgZGVwcmVjYXRlZC4gVXNlIHRoZSBwcm9wZXJ0eSAnaWNvbicgaW5zdGVhZC5gKTtcblxuICAgICAgaWYgKCFpY29uVHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgICAgIGljb25UeXBlID0gJ2NoZWNrLWNpcmNsZSc7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgICAgICAgaWNvblR5cGUgPSAnaW5mby1jaXJjbGUnO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgICAgICBpY29uVHlwZSA9ICdjbG9zZS1jaXJjbGUnO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgICAgICAgIGljb25UeXBlID0gJ2V4Y2xhbWF0aW9uLWNpcmNsZSc7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBpY29uVHlwZSA9ICdkZWZhdWx0JztcbiAgICAgICAgfSAvLyB1c2Ugb3V0bGluZSBpY29uIGluIGFsZXJ0IHdpdGggZGVzY3JpcHRpb25cblxuXG4gICAgICAgIGlmICghIWRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgaWNvblRoZW1lID0gJ291dGxpbmVkJztcbiAgICAgICAgfVxuICAgICAgfSAvLyBjbG9zZWFibGUgd2hlbiBjbG9zZVRleHQgaXMgYXNzaWduZWRcblxuXG4gICAgICBpZiAoY2xvc2VUZXh0KSB7XG4gICAgICAgIGNsb3NhYmxlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGFsZXJ0Q2xzID0gY2xhc3NOYW1lcyhwcmVmaXhDbHMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItXCIpLmNvbmNhdCh0eXBlKSwgKF9jbGFzc05hbWVzID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1jbG9zZVwiKSwgIV90aGlzLnN0YXRlLmNsb3NpbmcpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItd2l0aC1kZXNjcmlwdGlvblwiKSwgISFkZXNjcmlwdGlvbiksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1uby1pY29uXCIpLCAhc2hvd0ljb24pLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzTmFtZXMsIFwiXCIuY29uY2F0KHByZWZpeENscywgXCItYmFubmVyXCIpLCAhIWJhbm5lciksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3NOYW1lcywgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1jbG9zYWJsZVwiKSwgY2xvc2FibGUpLCBfY2xhc3NOYW1lcyksIGNsYXNzTmFtZSk7XG4gICAgICB2YXIgY2xvc2VJY29uID0gY2xvc2FibGUgPyBSZWFjdC5jcmVhdGVFbGVtZW50KFwiYVwiLCB7XG4gICAgICAgIG9uQ2xpY2s6IF90aGlzLmhhbmRsZUNsb3NlLFxuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItY2xvc2UtaWNvblwiKVxuICAgICAgfSwgY2xvc2VUZXh0IHx8IFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbiwge1xuICAgICAgICB0eXBlOiBcImNsb3NlXCJcbiAgICAgIH0pKSA6IG51bGw7XG4gICAgICB2YXIgZGF0YU9yQXJpYVByb3BzID0gZ2V0RGF0YU9yQXJpYVByb3BzKF90aGlzLnByb3BzKTtcbiAgICAgIHZhciBpY29uTm9kZSA9IGljb24gJiYgKFJlYWN0LmlzVmFsaWRFbGVtZW50KGljb24pID8gUmVhY3QuY2xvbmVFbGVtZW50KGljb24sIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKChfY2xhc3NOYW1lczIgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMiwgaWNvbi5wcm9wcy5jbGFzc05hbWUsIGljb24ucHJvcHMuY2xhc3NOYW1lKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzc05hbWVzMiwgXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1pY29uXCIpLCB0cnVlKSwgX2NsYXNzTmFtZXMyKSlcbiAgICAgIH0pIDogUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaWNvblwiKVxuICAgICAgfSwgaWNvbikpIHx8IFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbiwge1xuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItaWNvblwiKSxcbiAgICAgICAgdHlwZTogaWNvblR5cGUsXG4gICAgICAgIHRoZW1lOiBpY29uVGhlbWVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIF90aGlzLnN0YXRlLmNsb3NlZCA/IG51bGwgOiBSZWFjdC5jcmVhdGVFbGVtZW50KEFuaW1hdGUsIHtcbiAgICAgICAgY29tcG9uZW50OiBcIlwiLFxuICAgICAgICBzaG93UHJvcDogXCJkYXRhLXNob3dcIixcbiAgICAgICAgdHJhbnNpdGlvbk5hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItc2xpZGUtdXBcIiksXG4gICAgICAgIG9uRW5kOiBfdGhpcy5hbmltYXRpb25FbmRcbiAgICAgIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX2V4dGVuZHMoe1xuICAgICAgICBcImRhdGEtc2hvd1wiOiBfdGhpcy5zdGF0ZS5jbG9zaW5nLFxuICAgICAgICBjbGFzc05hbWU6IGFsZXJ0Q2xzLFxuICAgICAgICBzdHlsZTogc3R5bGVcbiAgICAgIH0sIGRhdGFPckFyaWFQcm9wcyksIHNob3dJY29uID8gaWNvbk5vZGUgOiBudWxsLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogXCJcIi5jb25jYXQocHJlZml4Q2xzLCBcIi1tZXNzYWdlXCIpXG4gICAgICB9LCBtZXNzYWdlKSwgUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBjbGFzc05hbWU6IFwiXCIuY29uY2F0KHByZWZpeENscywgXCItZGVzY3JpcHRpb25cIilcbiAgICAgIH0sIGRlc2NyaXB0aW9uKSwgY2xvc2VJY29uKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhBbGVydCwgW3tcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KENvbmZpZ0NvbnN1bWVyLCBudWxsLCB0aGlzLnJlbmRlckFsZXJ0KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQWxlcnQ7XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cbmV4cG9ydCB7IEFsZXJ0IGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7IHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBJbnB1dCwgQnV0dG9uLCBGb3JtLCBBbGVydCB9IGZyb20gJ2FudGQnO1xuaW1wb3J0IHsgc2V0VGltZW91dCB9IGZyb20gJ3RpbWVycyc7XG5pbXBvcnQgeyBsb2dpbkFjdGlvbiB9IGZyb20gJy4uLy4uL2FjdGlvbnMvYXV0aEFjdGlvbnMnO1xuXG5jb25zdCBiZ0xvZ2luID0gJy4vcHVibGljL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC1sb2dpbi5qcGcnO1xuXG5jbGFzcyBMb2dpbiBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7fTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaXNTaW5nZWRJbiB9ID0gdGhpcy5wcm9wcy5hdXRoO1xuICAgIGlmIChpc1NpbmdlZEluKSB7XG4gICAgICB0aGlzLnByb3BzLmhpc3RvcnkucHVzaCgnL2hvbWUvZGFzaGJvYXJkJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgfSwgMjAwKTtcbiAgICB9XG4gIH07XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlID0gbmV4dFByb3BzID0+IHtcbiAgICBjb25zdCB7IGlzU2luZ2VkSW4gfSA9IHRoaXMucHJvcHMuYXV0aDtcbiAgICBpZiAoaXNTaW5nZWRJbiAhPT0gbmV4dFByb3BzLmF1dGguaXNTaW5nZWRJbikge1xuICAgICAgdGhpcy5wcm9wcy5oaXN0b3J5LnB1c2goJy9ob21lL2Rhc2hib2FyZCcpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH0sIDIwMCk7XG4gICAgfVxuICB9O1xuXG4gIGhhbmRsZUxvZ2luID0gZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMucHJvcHMuZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyLCB2YWx1ZXMpID0+IHtcbiAgICAgIGlmICghZXJyKSB7XG4gICAgICAgIHRoaXMucHJvcHMubG9naW5BY3Rpb24odmFsdWVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBhdXRoIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgZ2V0RmllbGREZWNvcmF0b3IgfSA9IHRoaXMucHJvcHMuZm9ybTtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXItc2Nyb2xsZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlLWJvZHktd3JhcHBlciBmdWxsLXBhZ2Utd3JhcHBlciBhdXRoLXBhZ2VcIj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJjb250ZW50LXdyYXBwZXIgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBhdXRoIHRoZW1lLW9uZVwiXG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGB1cmwoJHtiZ0xvZ2lufSlgLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kU2l6ZTogJ2NvdmVyJyxcbiAgICAgICAgICAgICAgcGFkZGluZzogJzBweCcsXG4gICAgICAgICAgICAgIG1hcmdpbjogJzBweCdcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3cgdy0xMDBcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2wtbGctMlwiIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLWxnLTRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIlwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2dpbjEwMC1mb3JtIG10LTUgXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNVwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz1cIi4vcHVibGljL2Fzc2V0cy9pbWFnZXMvbG9nby5wbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwibG9naW4tbG9nb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogJzM1MHB4JyB9fVxuICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1kYXJrIG10LTNcIj5MT0dJTjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBweS0wIHJvdW5kZWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0gY2xhc3NOYW1lPVwiaW5wdXQtcm91bmRcIiBvblN1Ym1pdD17dGhpcy5oYW5kbGVMb2dpbn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtLkl0ZW0gbGFiZWw9XCJFTUFJTFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRGaWVsZERlY29yYXRvcignZW1haWwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlczogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICdQbGVhc2UgaW5wdXQgeW91ciBlbWFpbCEnIH1dXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS1jb250cm9sIHR4dC1sb2dpblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJsYXJnZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW1haWxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm0uSXRlbT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm0uSXRlbSBsYWJlbD1cIlBBU1NXT1JEXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2dldEZpZWxkRGVjb3JhdG9yKCdwYXNzd29yZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVzOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ1BsZWFzZSBpbnB1dCB5b3VyIHBhc3N3b3JkIScgfV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmb3JtLWNvbnRyb2wgdHh0LWxvZ2luXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZT1cImxhcmdlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybS5JdGVtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxUeXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFwZT1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplPVwibGFyZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9e2F1dGguaXNMb2FkaW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctMTAwIGJ0bi1sb2dpblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMT0dJTlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHthdXRoLm1lc3NhZ2UgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8QWxlcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtdC0zIHAtMiBlcnJvci1sb2dpblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e2F1dGgubWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiZXJyb3JcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gICAgLy8gcmV0dXJuIDxSZWRpcmVjdCB0bz1cIi9kYXNoYm9hcmRcIiAvPjtcbiAgICAvLyB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZGFzaGJvYXJkJztcbiAgfVxufVxuTG9naW4ucHJvcFR5cGVzID0ge1xuICBmb3JtOiBQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmFueSkuaXNSZXF1aXJlZCxcbiAgYXV0aDogUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5hbnkpLmlzUmVxdWlyZWQsXG4gIGxvZ2luQWN0aW9uOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICBoaXN0b3J5OiBQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmFueSkuaXNSZXF1aXJlZFxufTtcbmNvbnN0IExvZ2luRm9ybSA9IEZvcm0uY3JlYXRlKHsgbmFtZTogJ25vcm1hbF9sb2dpbicgfSkoTG9naW4pO1xuY29uc3QgbWFwU3RhdGVUb1Byb3BzID0gKHsgYXV0aCB9KSA9PiAoeyBhdXRoIH0pO1xuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcbiAgbWFwU3RhdGVUb1Byb3BzLFxuICB7IGxvZ2luQWN0aW9uIH1cbikod2l0aFJvdXRlcihMb2dpbkZvcm0pKTtcbiIsInZhciBzY29wZSA9ICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbCkgfHxcbiAgICAgICAgICAgICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmKSB8fFxuICAgICAgICAgICAgd2luZG93O1xudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgc2NvcGUsIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwoc2NvcGUsIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuLy8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVkaWF0ZWAgd2FzXG4vLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuLy8gYHNldGltbWVkaWF0ZWAgbGlicmFyeS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLnNldEltbWVkaWF0ZSk7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuY2xlYXJJbW1lZGlhdGUpO1xuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==